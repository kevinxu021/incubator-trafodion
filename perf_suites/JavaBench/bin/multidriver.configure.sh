
echo "   Drop/Create Control Tables"

${CI_COMMAND}<<EOF
drop table JAVABENCH.CONTROL_TABLE;

create table JAVABENCH.CONTROL_TABLE ( 
	TEST_ID  char(16) not null,
	DRIVER_NUMBER  int not null,
	DRIVER_STATE varchar(16),
	TOTAL_STREAMS int,
	ACTIVE_STREAMS int,
	DURATION_SECONDS numeric(12,2),
	ACCUMLATED_TRANSACTIONS largeint,
	ACCUMLATED_SUCCESSES largeint,
	ACCUMLATED_ERRORS largeint,
	ACCUMLATED_RETRIES largeint,
	ACCUMLATED_TRANSACTION_RESPONSE_MICRO largeint,
	INTVL_MAXIMUM_TRANSACTION_RESPONSE_MICRO largeint,
	INTVL_MINIMUM_TRANSACTION_RESPONSE_MICRO largeint,
	ACCUMLATED_OPERATIONS largeint,
	ACCUMLATED_OPERATION_RESPONSE_MICRO largeint,
	MAXIMUM_TRANSACTION_RESPONSE_MICRO largeint,
	MINIMUM_TRANSACTION_RESPONSE_MICRO largeint,
	PRIMARY KEY ( TEST_ID, DRIVER_NUMBER ) 
) ;

drop table JAVABENCH.CONTROL_TYPE_SUMMARY_TABLE;

create table JAVABENCH.CONTROL_TYPE_SUMMARY_TABLE ( 
	TEST_ID  char(16) not null,
	DRIVER_NUMBER  int not null,
	TRANSACTION_TYPE varchar(16) not null,
	ACCUMLATED_TRANSACTIONS largeint,
	ACCUMLATED_SUCCESSES largeint,
	ACCUMLATED_ERRORS largeint,
	ACCUMLATED_RETRIES largeint,
	ACCUMLATED_TRANSACTION_RESPONSE_MICRO largeint,
	MAXIMUM_TRANSACTION_RESPONSE_MICRO largeint,
	MINIMUM_TRANSACTION_RESPONSE_MICRO largeint,
	PRIMARY KEY ( TEST_ID, DRIVER_NUMBER, TRANSACTION_TYPE ) 
) ;

exit;
EOF
